# Programmierung 2: Einstieg in JavaFX

## SU 1 - Grundlagen und primitiver Calculator

Berliner Hochschule für Technik

---

## Lernziele

Nach dieser Einheit können Sie:

- Den grundlegenden Aufbau einer JavaFX-Applikation beschreiben
- Einfache Oberflächen mit Standard-Controls erstellen
- Das Grundprinzip des Event-Handlings verstehen und anwenden
- Einen bestehenden Calculator um Layout- und Event-Änderungen erweitern

---

## Überblick: JavaFX

- **JavaFX** ist das moderne GUI-Framework für Java
- Ersetzt das ältere Swing-Framework
- Unterstützt CSS-Styling und FXML
- Plattformunabhängig (Windows, macOS, Linux)

**Heute:** Grundlagen ohne FXML – alles in Java-Code

---

## Grundstruktur einer JavaFX-Anwendung

```java
public class HelloWorldFX extends Application {

    @Override
    public void start(Stage primaryStage) {
        // UI aufbauen
        Label label = new Label("Hallo, JavaFX!");
        VBox root = new VBox(label);

        // Scene und Stage verbinden
        Scene scene = new Scene(root, 300, 200);
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
```

---

## Die Kernkonzepte

### Stage
- Das Hauptfenster der Anwendung
- Enthält Titel, Größe, Fenstersteuerung

### Scene
- Der Inhalt des Fensters
- Enthält den Scenegraph (UI-Baum)

### Scenegraph
- Hierarchische Struktur aller UI-Elemente
- Root-Node → Children → Children → ...

---

## Stage und Scene - Zusammenspiel

```
┌─────────────────────────────────┐
│ Stage (Fenster)                 │
│  ┌───────────────────────────┐  │
│  │ Scene                     │  │
│  │  ┌─────────────────────┐  │  │
│  │  │ Root-Node (Layout)  │  │  │
│  │  │  ┌───────────────┐  │  │  │
│  │  │  │ Label         │  │  │  │
│  │  │  ├───────────────┤  │  │  │
│  │  │  │ Button        │  │  │  │
│  │  │  └───────────────┘  │  │  │
│  │  └─────────────────────┘  │  │
│  └───────────────────────────┘  │
└─────────────────────────────────┘
```

---

## Layouts - Container für UI-Elemente

### VBox
- Ordnet Kinder **vertikal** untereinander an
- `new VBox(10)` - 10 Pixel Abstand

### HBox
- Ordnet Kinder **horizontal** nebeneinander an
- `new HBox(10)` - 10 Pixel Abstand

### GridPane
- Tabellenartiges Layout mit Zeilen und Spalten
- `grid.add(node, col, row)`

---

## Layout-Beispiel: VBox und HBox

```java
VBox root = new VBox(10);
root.setAlignment(Pos.CENTER);
root.setPadding(new Insets(20));

HBox buttonRow = new HBox(5);
buttonRow.getChildren().addAll(
    new Button("OK"),
    new Button("Abbrechen")
);

root.getChildren().addAll(
    new Label("Titel"),
    buttonRow
);
```

---

## GridPane - Für Formulare ideal

```java
GridPane grid = new GridPane();
grid.setHgap(10);  // Horizontaler Abstand
grid.setVgap(10);  // Vertikaler Abstand

grid.add(new Label("Name:"), 0, 0);      // Spalte 0, Zeile 0
grid.add(new TextField(), 1, 0);          // Spalte 1, Zeile 0

grid.add(new Label("Passwort:"), 0, 1);  // Spalte 0, Zeile 1
grid.add(new PasswordField(), 1, 1);      // Spalte 1, Zeile 1
```

---

## Basis-Controls

| Control | Beschreibung |
|---------|--------------|
| `Label` | Textanzeige (nicht editierbar) |
| `TextField` | Einzeilige Texteingabe |
| `Button` | Klickbarer Button |
| `ComboBox` | Dropdown-Auswahlliste |
| `CheckBox` | Ankreuzfeld |
| `ListView` | Scrollbare Liste |

---

## Hello World Beispiel

```java
public void start(Stage primaryStage) {
    // Label erstellen
    Label label = new Label("Hallo, JavaFX!");

    // Button mit Event
    Button button = new Button("Klick mich!");
    button.setOnAction(e -> label.setText("Geklickt!"));

    // Layout
    VBox root = new VBox(10, label, button);
    root.setAlignment(Pos.CENTER);

    // Scene erstellen und anzeigen
    primaryStage.setScene(new Scene(root, 300, 200));
    primaryStage.show();
}
```

---

## Der primitive Calculator

### Ziel für SU 1 + Übung 1:

- Zwei Eingabefelder für Zahlen
- Operator-Auswahl (+, -, *, /)
- "Berechnen"-Button
- Ergebnis-Label
- Optional: Historie-Liste (Übung 1)

---

## Calculator - Projektstruktur

```
su1_e05_simple_calculator/
├── Launcher.java
└── SimpleCalculator.java
```

**Kein FXML, kein MVP** – alles in einer Klasse für den Einstieg

---

## Calculator - UI Aufbau

```java
// Eingabefelder
TextField operand1Field = new TextField();
TextField operand2Field = new TextField();

// Operator-Auswahl
ComboBox<String> operatorCombo = new ComboBox<>(
    FXCollections.observableArrayList("+", "-", "*", "/")
);

// Buttons
Button calculateButton = new Button("Berechnen");
Button clearButton = new Button("Löschen");

// Ergebnis
Label resultLabel = new Label("Ergebnis: ");
```

---

## Mini-Aufgabe 1: Layout-Änderung

### Aufgabe (5 Minuten):

Öffnen Sie das Projekt `su1_e05_simple_calculator` und:

**Option A:** Fügen Sie einen "Clear"-Button hinzu, der alle Felder leert

**Option B:** Ändern Sie das Layout, sodass die Eingabefelder mit `GridPane` übersichtlicher angeordnet sind

---

## Event-Handling - Das Konzept

```
┌─────────┐      ┌───────┐      ┌─────────┐      ┌──────┐
│  User   │──▶│ Button │──▶│ Handler │──▶│ View │
│ klickt  │      │(Event)│      │(Logik)  │      │Update│
└─────────┘      └───────┘      └─────────┘      └──────┘
```

1. User interagiert mit UI-Element
2. Event wird ausgelöst
3. Handler-Code wird ausgeführt
4. UI wird aktualisiert

---

## setOnAction - Button-Events

```java
Button button = new Button("Klick mich!");

// Variante 1: Lambda-Ausdruck
button.setOnAction(e -> {
    System.out.println("Button geklickt!");
});

// Variante 2: Methodenreferenz
button.setOnAction(this::handleButtonClick);

// Variante 3: Anonyme Klasse
button.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event) {
        System.out.println("Button geklickt!");
    }
});
```

---

## Eingaben auslesen

```java
// Text aus TextField holen
String input = textField.getText();

// In Zahl umwandeln
try {
    double number = Double.parseDouble(input);
    // Berechnung durchführen...
} catch (NumberFormatException e) {
    // Ungültige Eingabe behandeln
    resultLabel.setText("Fehler: Keine gültige Zahl!");
}
```

---

## Events im Calculator - Addition

```java
calculateButton.setOnAction(e -> {
    try {
        // 1. Eingaben auslesen
        double num1 = Double.parseDouble(operand1Field.getText());
        double num2 = Double.parseDouble(operand2Field.getText());

        // 2. Berechnung durchführen
        double result = num1 + num2;

        // 3. Ergebnis anzeigen
        resultLabel.setText("Ergebnis: " + result);

    } catch (NumberFormatException ex) {
        resultLabel.setText("Fehler: Ungültige Eingabe!");
    }
});
```

---

## Switch für mehrere Operatoren

```java
String operator = operatorCombo.getValue();

double result = switch (operator) {
    case "+" -> num1 + num2;
    case "-" -> num1 - num2;
    case "*" -> num1 * num2;
    case "/" -> {
        if (num2 == 0) {
            throw new ArithmeticException("Division durch 0!");
        }
        yield num1 / num2;
    }
    default -> 0;
};
```

---

## Mini-Aufgabe 2: Event-Verhalten

### Aufgabe (5 Minuten):

**Option A:** Erweitern Sie den Calculator so, dass bei ungültiger Eingabe (leeres Feld, keine Zahl) eine Fehlermeldung im Label erscheint

**Option B:** Fügen Sie eine Validierung hinzu: Der "Berechnen"-Button soll deaktiviert sein, wenn ein Feld leer ist

---

## Ausblick: Übung 1

### In der Übung erweitern Sie den Calculator um:

1. **Weitere Operatoren** (%, √, etc.)
2. **Historie-Liste (ListView)** - zeigt alle bisherigen Berechnungen
3. **Bessere Fehlerbehandlung**

```java
// ListView für Historie
ListView<String> historyList = new ListView<>();
ObservableList<String> historyItems =
    FXCollections.observableArrayList();
historyList.setItems(historyItems);

// Nach Berechnung hinzufügen:
historyItems.add("5 + 3 = 8");
```

---

## Ausblick: SU 2

### In der nächsten Einheit:

- **FXML** - UI-Design von Logik trennen
- **CSS-Styling** - Calculator schöner gestalten
- **MVP-Pattern** - Model-View-Presenter Architektur
- **Komplexerer Calculator** mit professionellem Design

---

## Zusammenfassung

### Heute gelernt:

✅ Aufbau von JavaFX-Anwendungen (Application, Stage, Scene)

✅ Layouts (VBox, HBox, GridPane)

✅ Basis-Controls (Label, TextField, Button, ComboBox)

✅ Event-Handling mit `setOnAction` und Lambda-Ausdrücken

✅ Primitiver Calculator als praktisches Beispiel

---

## Nächste Schritte

### Übung 1:
- Calculator um Operatoren erweitern
- Historie-Liste (ListView) implementieren
- Fehlerbehandlung verbessern

### SU 2:
- FXML und CSS kennenlernen
- MVP-Architektur verstehen
- Professionellen Calculator bauen

---

## Fragen?

### Ressourcen:

- **Code-Beispiele:** `lession08/src/main/java/de/bht/pr2/lession08/su1_*`
- **Übungsvorlage:** `su1_uebung1/CalculatorExercise.java`
- **JavaFX Dokumentation:** https://openjfx.io/javadoc/

---

## Vielen Dank!

Viel Erfolg bei der Übung!
